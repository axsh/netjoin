#!/usr/bin/env ruby
# -*- coding: utf-8 -*-

require 'thor'
require 'yaml'

require_relative '../lib/ducttape'
require_relative '../lib/ducttapeCLI'

module DucttapeCLI 
  
  class Main < Thor
      
    desc "instances SUBCOMMAND ...ARGS", "manage instances"
    subcommand "instances", DucttapeCLI::Instances
  
  end
  
  def self.loadConfig()
    Struct.new("Instance", :type, :data)
    config = YAML.load_file('instances.yml')
    if(!config)
      config = {}
    end     
    return config
  end
  
  def self.writeConfig(config)
    File.open('instances.yml','w') do |h| 
      h.write config.to_yaml      
    end
  end
  
end

DucttapeCLI::Main.start(ARGV)
