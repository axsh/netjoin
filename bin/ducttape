#!/usr/bin/env ruby
# -*- coding: utf-8 -*-

require 'thor'
require 'yaml'

require_relative '../lib/ducttape'
require_relative '../lib/ducttapeCLI'

module DucttapeCLI 
  class Main < Thor
    
    desc "hello NAME", "say hello to NAME"
    def hello(name)
      puts "Hello #{name}"
    end
  
    desc "instances SUBCOMMAND ...ARGS", "manage instances"
    subcommand "instances", DucttapeCLI::Instances
  
  end
  
  def self.loadConfig()
    Struct.new("Data", :ip, :username, :password)
    Struct.new("Instance", :type, :data)
    return YAML.load_file('instances.yml')
  end
  
  def self.writeConfig(config)
    File.open('instances.yml','w') do |h| 
      h.write config.to_yaml      
    end
  end
end

DucttapeCLI::Main.start(ARGV)
